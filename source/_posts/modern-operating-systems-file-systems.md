title: <<现代操作系统>>学习笔记之文件系统
date: 2016-02-22 17:18:15
tags: [operating system, file system, modern operating systems]
categories: Operating Systems
---

### 文件系统简介

#### 为什么需要文件系统

1. 程序有需要存储大量信息的需求

	所有的计算机应用都需要存储和读取信息，如果将这些信息都放在地址空间中，那么信息的容量将会受到限制。

2. 在程序关闭之后信息依然需要被保留

	如果将信息存储在地址空间中，如果进程结束，那么信息就会丢失。当进程被杀掉的时候，有些信息也需要被存储。

3. 多个进程能同时访问信息

	如果将信息存储在地址空间，那么多个进程将无法访问这些信息。（采用进程间通信是另外一回事～～）

#### 对长期存储进行抽象

通常我们用来存储这些信息的设备由磁盘，固态硬盘，光盘，磁带。在这部分内容中我们只需要将这些设备看做一个提供了读某个区块(block)和写某个区块的区块序列就行。但是如果只有读写区块的操作，那么在使用中，就会非常的不方便，需要考虑很多额外的问题，比如， 如何找到数据，如何隔离不同用户的信息，如何释放数据等等。

正如操作系统将处理器抽象为进程，将主存储器抽象为地址空间，磁盘被抽象为了文件。
进程，地址空间，文件是操作系统中非常重要的三个抽象。

### 文件

#### 文件命名

文件名在进程创建文件时指定，在进程结束时依然存在并可以被其他进程使用，不同的操作系统对文件名的要求不同，当前所有的操作系统都允许1-8个字母构成的文件名。通常情况下，操作系统也允许文件名包含数字和特殊字符。

UNIX的文件系统中区分文件名的大小写，MS-DOS不区分。Windows 95，Windows 98采用的是MS-DOS的文件系统FAT16， Windows 98引入了一种FAT16的扩展，称之为FAT32. Windows NT，Windows 2000，Windows XP，Windows Vista， Windows 7，Windows 8 依然支持FAT文件系统，同事也也引入了更先进的文件系统NTFS。

很多操作系统都支持两部分的文件名，包括文件名和扩展名，通过 . 来进行分割。在 UNIX 中扩展名仅仅是为了阅读方便，在 Windows 中，扩展名被赋予了意义，可以将某个文件扩展名注册为属于某软件。

#### 文件结构

文件通常可以按照以下三种方式进行组织

1. 字节流： UNIX Windows 采用这种方式组织文件， 在这种组织方式中， 操作系统不对文件提供额外的帮助或者阻拦， 仅仅当作一串字节序列， 提供了最大的灵活性。
2. 记录序列： 在比较早期的主机上， 文件按照80个字符(穿孔卡为80列)或者132个字符(打印机为132列)组织成记录序列
3. 树形结构： 这种方案可以更快的查询指定key的文件和提供下一个的操作， 在一些大型主机上使用来处理商业数据。

#### 文件类型

在 UNIX 和 Windows 中，文件被分为普通文件和目录。目录包含了文件系统的结构。 普通文件又分为 ASCII 文件和 二进制文件

#### 文件存取

早期的操作系统只提供了顺序存取， 值能从文件开始处依次读取文件， 后来的操作系统支持随机读取文件， 在 UNIX 和 Windows 中是通过 seek 来实现

#### 文件属性